var topLevelClass=".vscom-dropdown-menu-container",DEBUG_MODE=!1;jQuery.fn.setup_dropdowns=function(e){function s(e,s){if(DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" fn openMenu"),s&&s.preventDefault(),jQuery(f).attr("aria-expanded","true"),!e)throw"VSCOM Error: fn openMenu missing required parameter";jQuery(e).addClass(settings.addHoverClass).find("a").attr("tabIndex",0)}function t(e,s){DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" fn closeMenu"),s&&s.preventDefault(),e?(0!=jQuery(e).closest(settings.containerClass).find(":focus").length&&jQuery(e).closest(settings.containerClass).find(settings.topLinkClass).attr("aria-expanded","false").focus(),jQuery(e).removeClass(settings.addHoverClass).find("a").attr("tabIndex",-1)):(jQuery(f).attr("aria-expanded","false"),jQuery(i).find(settings.subMenuClass+settings.menuHoverClass).removeClass(settings.addHoverClass).find("a").attr("tabIndex",-1))}function n(e,n){if(DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" fn toggleMenu"),n&&n.preventDefault(),!e)throw"VSCOM Error: fn toggleMenu missing required parameter";var o=jQuery(i).find(settings.subMenuClass);DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" - "+jQuery(o).length+" "+JSON.stringify(o)),jQuery(o).length>0&&(jQuery(o).hasClass(settings.addHoverClass)?t(o,n):s(o,n))}function o(e,s){if(DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" fn selectLast"),s&&s.preventDefault(),!e)throw"VSCOM Error: fn selectLast missing required parameter";var t=jQuery(i).find(settings.subMenuClass);jQuery(t).length>0&&(jQuery(t).hasClass(settings.addHoverClass)||jQuery(t).addClass(settings.addHoverClass),jQuery(t).find("a").attr("tabIndex",0).last().focus())}function r(e,s){if(DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" fn selectFirst"),s&&s.preventDefault(),!e)throw"VSCOM Error: fn selectFirst missing required parameter";var t=jQuery(i).find(settings.subMenuClass);jQuery(t).length>0&&(jQuery(t).hasClass(settings.addHoverClass)||jQuery(t).addClass(settings.addHoverClass),jQuery(t).find("a").attr("tabIndex",0).first().focus())}function a(e,s){if(DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" fn moveUp"),s&&s.preventDefault(),!e)throw"VSCOM Error: fn moveUp missing required parameter";0===jQuery(e).closest("li").prev("li").length?jQuery(f).focus():jQuery(e).closest("li").prev("li").find("a").focus()}function l(e,s){if(DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" fn moveDown"),s&&s.preventDefault(),!e)throw"VSCOM Error: fn moveDown missing required parameter";0===jQuery(e).closest("li").next("li").length?jQuery(f).focus():jQuery(e).closest("li").next("li").find("a").focus()}var i=this;settings={containerClass:".vscom-dropdown-menu-container",menuHoverClass:".show-menu",addHoverClass:"show-menu",topLinkClass:".toplink",subMenuClass:".vscom-subnav",subLinkClass:".sublink"},e&&(settings=jQuery.extend(settings,e));var u={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"LEFT_ARROW",38:"UP_ARROW",39:"RIGHT_ARROW",40:"DOWN_ARROW"},f=jQuery(this).find(settings.topLinkClass);DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" "+JSON.stringify(f));var c=jQuery(this).find(settings.subLinkClass);DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" "+JSON.stringify(c)),jQuery(f).attr("tabindex","0"),jQuery(c).attr("tabIndex",-1),jQuery(i).hover(function(e){DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" container level hover in")},function(e){DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" container level hover out"),0==jQuery(settings.containerClass).has(e.target).length&&t()}),jQuery(f).click(function(e){n(this,e)}).hover(function(e){DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" top button hover in"),s(jQuery(this).closest(settings.subMenuClass),e)},function(e){DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" top button hover out")}).keydown(function(e){switch(DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" fn topLevelButton keydown "+u[e.keyCode]),u[e.keyCode]){case"UP_ARROW":o(this,e);break;case"TAB":e.shiftKey&&t();break;case"DOWN_ARROW":r(this,e);break;case"ESCAPE":t(this,e)}}),jQuery(c).keydown(function(e){switch(DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" fn links keydown "+u[e.keyCode]),u[e.keyCode]){case"UP_ARROW":a(this,e);break;case"DOWN_ARROW":l(this,e);break;case"TAB":if(e.shiftKey)break;jQuery(this).closest("li").is(":last-child")&&t(jQuery(this).closest(settings.subMenuClass));break;case"ESCAPE":t(jQuery(this).closest(settings.subMenuClass),e)}}),jQuery(document).click(function(e){DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" fn document click handler"),"click"===e.type&&0==jQuery(settings.containerClass).has(e.target).length&&(DEBUG_MODE&&console.log(Math.floor(Date.now()/1e3)+" clicked outside topLevelClass elements"),t())})},jQuery(document).ready(function(){jQuery(topLevelClass).each(function(){jQuery(this).setup_dropdowns()})});